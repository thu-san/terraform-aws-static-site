# Subfolder Index Example

This example demonstrates how to use the built-in subfolder index functionality to automatically serve index files from subdirectories.

## Features

- **Automatic Index File Serving**: CloudFront automatically serves `index.html` (or any configured file) when accessing directory paths
- **No External Functions Required**: The module creates the CloudFront function automatically

## How It Works

When `subfolder_root_object` is set, the module:
1. Creates a CloudFront function that appends the specified file to directory paths
2. Automatically attaches this function to the CloudFront distribution

## Usage

1. Set up your terraform.tfvars:

```hcl
s3_bucket_name               = "my-site-bucket"
cloudfront_distribution_name = "My Site"
```

2. Deploy:

```bash
terraform init
terraform plan
terraform apply
```

3. Upload your content with proper folder structure:

```bash
# Upload site content
aws s3 sync ./dist s3://my-site-bucket/

# Example folder structure:
# /index.html (root)
# /about/index.html
# /products/index.html
# /blog/post-1/index.html
```

4. Access your site:
   - `https://your-cloudfront-domain.cloudfront.net/` → serves `/index.html`
   - `https://your-cloudfront-domain.cloudfront.net/about/` → serves `/about/index.html`
   - `https://your-cloudfront-domain.cloudfront.net/products/` → serves `/products/index.html`

## Customization

You can customize the behavior by:

1. **Changing the subfolder root object**:
   ```hcl
   subfolder_root_object = "default.html"
   ```

2. **Changing the root object**:
   ```hcl
   default_root_object = "home.html"
   ```

This functionality is perfect for:
- Static sites with clean URLs
- Single-page applications with client-side routing
- Sites generated by static site generators (Hugo, Jekyll, etc.)